{"version":3,"sources":["context/app.state.ts","utils/helpers.ts","components/header/index.tsx","api/api.actions.ts","context/actions.ts","components/vacation-form/index.tsx","api/io.actions.ts","assets/no_img.jpeg","components/vacation-card/index.tsx","routes/admin-page/index.tsx","routes/home-page/index.tsx","routes/login-page/index.tsx","routes/privateRoute.tsx","routes/reports-page/index.tsx","routes/restrictedRoute.tsx","routes/signup-page/index.tsx","routes/appRouter.tsx","components/socket-provider/index.tsx","App.tsx","index.tsx","components/vacation-card/styles.module.css","components/vacation-form/styles.module.css"],"names":["StateContext","React","createContext","appState","setAppState","state","getDecodedJwt","token","jwt_decode","getSavedJwt","Cookies","get","removeSavedJwt","remove","setNewJwt","jwt","set","path","checkUrl","url","a","axios","isValid","Header","showAdminNavigateBtn","userName","logout","history","props","push","componentDidMount","user","setState","isAdmin","this","title","navigateBtnElem","className","Button","onClick","size","variant","Component","withRouter","BASE_URL","API_ACTIONS","getVacations","id","headers","Authorization","addVacation","newVacation","description","destination","imgUrl","fromDate","toDate","price","post","updateVacation","updatedVacation","put","params","removeVacation","vacationId","delete","vacationFollowing","action","userId","CONTEXT_ACTIONS","setVacations","context","sortedVacations","followsVacations","vacations","follows","initialVacations","navigateToLogin","data","response","status","updatedVacations","reduce","acc","vacation","filter","v","f_id","followVacation","alsoFollowsArr","map","followersQuantity","concat","unFollowVacation","f","VacationForm","formMsg","handleSubmit","e","preventDefault","onSubmit","elem","target","desc","value","dest","img","f_date","t_date","length","setFormMessage","handleFormChange","mess","abortForm","Form","onChange","InputGroup","Text","FormControl","type","name","defaultValue","maxLength","required","max","moment","format","styles","formMsgContainer","setUpNewConnection","socketIOClient","transports","socket","socketMiddleware","emit","payload","VacationCard","editMode","validUrl","window","confirm","alert","error","console","handleFormSubmit","formMsgSetter","newDescription","newDestination","newImgUrl","newFromDate","newToDate","newPrice","isSame","isSameOrBefore","handleFollow","following","isUrlValid","no_img","controlledComponent","currentVacation","some","container","style","width","Card","likeBtn","like","unlike","likeOff","Img","src","alt","height","Body","Title","contextType","AdminPage","modalVisibility","newVacationWithId","_id","hideModal","Modal","show","onHide","centered","HomePage","LoginPage","errMsg","password","results","to","PrivateRoute","children","exact","render","ChartJS","register","CategoryScale","LinearScale","BarElement","ReportsPage","chartData","initialChartData","dataset","labels","datasets","label","backgroundColor","forEach","Container","options","responsive","scales","y","ticks","stepSize","RestrictedRoute","SignupPage","firstName","lastName","AppRouter","component","SocketProvider","on","App","newAppState","Provider","ReactDOM","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.1d76bb80.chunk.js","sourcesContent":["import React from 'react';\nimport { VacationModel } from '../models/vacations.model';\n\nexport interface AppState {\n    vacations: {\n        sortedVacations: VacationModel[],\n        follows: number[]\n    }\n}\n\nexport interface IContext {\n    appState: AppState;\n    setAppState: (state: Partial<AppState>) => void\n}\n\nexport const StateContext = React.createContext<IContext>({ appState: {} as any, setAppState: (state: Partial<AppState>) => null });","import axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Cookies from \"universal-cookie/es6\";\nimport { UserModel } from \"../models/user.model\";\n\nexport const getDecodedJwt = (token: string): Partial<UserModel> => jwt_decode(token); \n\nexport const getSavedJwt = (): string => {\n    const cookies = new Cookies();\n    return cookies.get('JWT');\n}\nexport const removeSavedJwt = (): void => {\n    const cookies = new Cookies();\n    cookies.remove('JWT');\n}\nexport const setNewJwt = (jwt: string): void => {\n    const cookies = new Cookies();\n    cookies.set('JWT', jwt, { path: '/' });\n}\nexport const checkUrl = async (url: string): Promise<boolean> => {\n    let isValid: boolean;\n    try {\n        await axios.get(url);\n        isValid = true;\n    } catch (err: any) {\n        isValid = false;\n    }\n    return isValid;\n}","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { UserModel } from '../../models/user.model';\nimport { getDecodedJwt, getSavedJwt, removeSavedJwt } from '../../utils/helpers';\n\ninterface IState {\n    showAdminNavigateBtn: boolean;\n    userName: string;\n}\ninterface IProps {\n    title: string;\n    navigateBtnElem: JSX.Element;\n}\n\nclass Header extends React.Component<IProps & RouteComponentProps, IState> {\n    state: IState = {\n        showAdminNavigateBtn: false,\n        userName: ''\n    }\n\n    logout = () => {\n        const { history } = this.props;\n        removeSavedJwt()\n        history.push('/login')\n    }\n    componentDidMount = () => {\n        const token = getSavedJwt();\n        const user: Partial<UserModel> = getDecodedJwt(token)\n\n        this.setState({\n            showAdminNavigateBtn: user?.isAdmin as boolean,\n            userName: user?.userName as string\n        })\n    }\n    render () {\n        const { showAdminNavigateBtn, userName } = this.state;\n        const { title, navigateBtnElem } = this.props;\n\n        return (\n            <div className={'d-flex justify-content-between align-items-center p-3 bg-dark text-light'}>\n                <div className={'d-flex align-items-center'}>\n                    <h1>ObserVacation | </h1>\n                    <h2 className={'text-muted m-0 ms-3'}> {title} </h2>\n                </div>\n                <div className={'d-flex align-items-center'}>\n                    <span className={'me-2'}>Hello {userName}</span>\n                    { showAdminNavigateBtn && navigateBtnElem}\n                    <Button onClick={this.logout} size={'sm'} variant={'danger'}>Logout</Button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Header);","import axios, { AxiosResponse } from \"axios\"\nimport { UserModel } from \"../models/user.model\"\nimport { VacationModel } from \"../models/vacations.model\"\nimport { getDecodedJwt, getSavedJwt } from \"../utils/helpers\"\n\nconst BASE_URL = 'http://localhost:4000';\n\nexport const API_ACTIONS = {\n    getVacations: async (): Promise<AxiosResponse<{sortedVacations: VacationModel[], followsVacations: number[]}>> =>{\n        const token: string = getSavedJwt()\n        const user: Partial<UserModel> = getDecodedJwt(token)\n        \n        return await axios.get<{sortedVacations: VacationModel[], followsVacations: number[]}>(`${BASE_URL}/api/vacations/user/${user.id}`, {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        })\n    },\n    addVacation: async (newVacation: Partial<VacationModel>) =>{\n        const token: string = getSavedJwt()\n        const { description, destination, imgUrl, fromDate, toDate, price } = newVacation;\n        \n        return await axios.post<{ _id: number }>(`${BASE_URL}/api/vacations`, { description, destination, imgUrl, fromDate, toDate, price }, {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        })\n    },\n    updateVacation: async (updatedVacation: VacationModel): Promise<void> => {\n        const token: string = getSavedJwt()\n        const { id, description, destination, imgUrl, fromDate, toDate, price } = updatedVacation;\n        \n        return await axios.put(`${BASE_URL}/api/vacations`, { description, destination, imgUrl, fromDate, toDate, price }, {\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n            params: { id, description, destination, imgUrl, fromDate, toDate, price }\n        })\n    },\n    removeVacation: async (vacationId: number) => {\n        const token: string = getSavedJwt()\n        \n        return await axios.delete(`${BASE_URL}/api/vacations/${vacationId}`, {\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n        })\n    },\n    vacationFollowing: async (vacationId: number, action: string) => {\n        const token: string = getSavedJwt()\n        const user: Partial<UserModel> = getDecodedJwt(token)\n        \n        return await axios.get<{sortedVacations: VacationModel[], followsVacations: number[]}>(`${BASE_URL}/api/vacations/${action}`, {\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n            params: {\n                userId: user.id,\n                vacationId: vacationId\n            }\n        })\n    },\n}","import { API_ACTIONS } from \"../api/api.actions\";\nimport { VacationModel } from \"../models/vacations.model\";\nimport { IContext } from \"./app.state\";\n\nexport const CONTEXT_ACTIONS = {\n    setVacations: (context: IContext, { sortedVacations, followsVacations}: {sortedVacations: VacationModel[], followsVacations: number[]}) => {\n        const { setAppState } = context;\n        setAppState({\n            vacations: {\n                sortedVacations: sortedVacations,\n                follows: followsVacations\n            }\n        })\n    },\n    initialVacations: async (context: IContext, navigateToLogin: Function) => {\n        try {\n            const { data } = await API_ACTIONS.getVacations();\n            CONTEXT_ACTIONS.setVacations(context, data);\n            \n            return data;\n        } catch (err: any) {\n            if (err.response.status === 401) navigateToLogin();\n        }\n    },\n    addVacation: (context: IContext, newVacation: VacationModel) => {\n        const { appState, setAppState } = context;\n        setAppState({\n            vacations: { ...appState.vacations,\n                sortedVacations: [ ...appState.vacations.sortedVacations, newVacation]\n            }\n        })\n    },\n    updateVacation: (context: IContext, updatedVacation: VacationModel) => {\n        const { appState, setAppState } = context;\n        const { id } = updatedVacation;\n        const updatedVacations: VacationModel[] = appState.vacations.sortedVacations.reduce((acc: VacationModel[], vacation: VacationModel): VacationModel[] => {\n            if (vacation.id === id) return [ ...acc, updatedVacation]\n            else return [...acc, vacation];\n        }, [])\n        \n        setAppState({\n            vacations: { ...appState.vacations,\n                sortedVacations: updatedVacations\n            }\n        })\n    },\n    removeVacation: (context: IContext, id: number) => {\n        const { appState, setAppState } = context;\n\n        setAppState({\n            vacations: {\n                sortedVacations: appState.vacations.sortedVacations.filter((v: VacationModel) => v.id !== id),\n                follows: appState.vacations.follows.filter((f_id: number) => f_id !== id)\n            }\n        })\n    },\n    followVacation: (context: IContext, vacationId: number, alsoFollowsArr: boolean) => {\n        const { appState, setAppState } = context;\n        setAppState({\n            vacations: {\n                sortedVacations: [...appState.vacations.sortedVacations.map((v: VacationModel) => { \n                    if (v.id === vacationId) v.followersQuantity += 1;\n                    return v;\n                })],\n                follows: alsoFollowsArr ? appState.vacations.follows.concat(vacationId): appState.vacations.follows\n            }\n        })\n    },\n    unFollowVacation: (context: IContext, vacationId: number, alsoFollowsArr: boolean) => {\n        const { appState, setAppState } = context;\n        setAppState({\n            vacations: {\n                sortedVacations: [...appState.vacations.sortedVacations.map((v: VacationModel) => { \n                    if (v.id === vacationId) v.followersQuantity -= 1;\n                    return v;\n                })],\n                follows: alsoFollowsArr ? [ ...appState.vacations.follows.filter((f: number) => f !== vacationId)] : appState.vacations.follows\n            }\n        })\n    }\n}","import moment from 'moment';\nimport React, { FormEvent } from 'react';\nimport { Form, FormControl, InputGroup, Button } from 'react-bootstrap';\nimport { VacationModel } from '../../models/vacations.model';\nimport { FaPlaneArrival, FaPlaneDeparture } from 'react-icons/fa';\nimport styles from './styles.module.css';\n\ninterface IProps {\n    title: string;\n    data?: VacationModel;\n    onSubmit: Function;\n    abortForm: Function;\n}\ninterface IState {\n    formMsg: string;\n}\nexport class VacationForm extends React.Component<IProps, IState> {\n\n    state: IState = {\n        formMsg: ''\n    }\n    \n    handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        const { onSubmit } = this.props;\n        const elem = e.target as HTMLFormElement;\n        const desc = elem.description.value, dest = elem.destination.value, img = elem.imgUrl.value, f_date = elem.fromDate.value, t_date = elem.toDate.value, price = elem.price.value;\n\n        if(!desc.length || !dest.length || !img.length || !f_date.length || !t_date.length || !price.length) return this.setFormMessage('All fields are required to proceed !');\n        const vacation = {\n            description: desc,\n            destination: dest,\n            imgUrl: img,\n            fromDate: f_date,\n            toDate: t_date,\n            price: price\n        }\n\n        onSubmit(vacation, this.setFormMessage)\n    }\n    handleFormChange = () => {\n        this.setFormMessage('')\n    }\n    setFormMessage = (mess: string) => {\n        this.setState({\n            formMsg: mess\n        })\n    }\n\n    render () {\n        const { formMsg } = this.state;\n        const { abortForm, data, title } = this.props;\n        \n        return (\n            <Form className={`h-100 bg-dark text-light p-3 rounded`} onSubmit={this.handleSubmit} onChange={this.handleFormChange}>\n                <div className={'d-flex flex-column h-100'}>\n                    <div className={'flex-grow-1 d-flex flex-column'}>\n                        <h3 className={'text-center'}>{ title }</h3>\n                        <InputGroup className={'my-2'}>\n                            <InputGroup.Text>Destination</InputGroup.Text>\n                            <FormControl type={'text'} name={'destination'} defaultValue={data && data.destination} maxLength={45} required/>\n                        </InputGroup>\n                        <InputGroup className={'my-2'}>\n                            <InputGroup.Text>Description</InputGroup.Text>\n                            <FormControl type={'text'} name={'description'} defaultValue={data && data.description} maxLength={208} required/>\n                        </InputGroup>\n                        <InputGroup className={'my-2'}>\n                            <InputGroup.Text>Image</InputGroup.Text>\n                            <FormControl type={'text'} name={'imgUrl'} defaultValue={data && data.imgUrl} maxLength={208} required/>\n                        </InputGroup>\n                        <InputGroup className={'my-2'}>\n                            <InputGroup.Text>Price</InputGroup.Text>\n                            <FormControl type={'number'} defaultValue={data && data.price} name={'price'} max={999999999999} required/>\n                            <InputGroup.Text>$</InputGroup.Text>\n                        </InputGroup>\n                        <InputGroup className={'my-2'}>\n                            <InputGroup.Text><small>Start Date</small></InputGroup.Text>\n                            <FormControl type={'datetime-local'} name={'fromDate'} defaultValue={data && moment(data.fromDate).format('yyyy-MM-DDTHH:mm')} required/>\n                            <InputGroup.Text><FaPlaneDeparture/></InputGroup.Text>\n                        </InputGroup>\n                        <InputGroup className={'my-2'}>\n                            <InputGroup.Text><small>End Date</small></InputGroup.Text>\n                            <FormControl type={'datetime-local'} name={'toDate'} defaultValue={data && moment(data.toDate).format('yyyy-MM-DDTHH:mm')} required/>\n                            <InputGroup.Text><FaPlaneArrival/></InputGroup.Text>\n                        </InputGroup>\n                        <div className={styles.formMsgContainer}>{formMsg}</div>\n                    </div>\n                    <div className={'d-flex align-items-end'}>\n                        <Button variant={'secondary'} onClick={() => abortForm()}>Cancel</Button>\n                        <Button className={'flex-grow-1 ms-2'} type={'submit'} variant={'primary'}>Confirm</Button>\n                    </div>\n                </div>\n            </Form>\n        )\n    }\n}","import socketIOClient, { Socket } from \"socket.io-client\";\n\nconst setUpNewConnection = () => socketIOClient('http://localhost:4000', {transports: ['websocket']});\nlet socket: Socket = setUpNewConnection()\n\ninterface IProps {\n    type: string;\n    payload?: any;\n}\n\nexport function socketMiddleware(action: IProps) {\n    switch(action.type) {\n        case 'GET_CONNECTION': {\n            if(!socket) return setUpNewConnection()\n            return socket;\n        }\n        case 'UNFOLLOW_VACATION': socket.emit('unfollow_vacation', action.payload); break;\n        case 'FOLLOW_VACATION': socket.emit('follow_vacation', action.payload); break;\n        case 'UPDATE_VACATION': socket.emit('update_vacation', action.payload); break;\n        case 'ADD_VACATION': socket.emit('add_vacation', action.payload); break;\n        case 'REMOVE_VACATION': socket.emit('remove_vacation', action.payload); break;\n        default: return socket;\n    }\n}\n","export default \"data:image/jpeg;base64,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\"","import moment from 'moment';\nimport React from 'react';\nimport { Card } from 'react-bootstrap';\nimport { VacationModel } from '../../models/vacations.model';\nimport { FaPlaneArrival, FaPlaneDeparture } from 'react-icons/fa';\nimport { MdDeleteOutline } from 'react-icons/md';\nimport { AiFillLike } from 'react-icons/ai';\nimport { FiEdit } from 'react-icons/fi';\nimport styles from './styles.module.css';\nimport { StateContext } from '../../context/app.state';\nimport { API_ACTIONS } from '../../api/api.actions';\nimport { CONTEXT_ACTIONS } from '../../context/actions';\nimport { checkUrl, getDecodedJwt, getSavedJwt } from '../../utils/helpers';\nimport { UserModel } from '../../models/user.model';\nimport { VacationForm } from '../vacation-form';\nimport { socketMiddleware } from '../../api/io.actions';\nimport no_img from '../../assets/no_img.jpeg'\n\ninterface IProps {\n    controlledComponent: boolean;\n}\ninterface IState {\n    editMode: boolean;\n    validUrl: string;\n}\nexport class VacationCard extends React.Component<IProps & VacationModel, IState> {\n    static contextType = StateContext;\n    \n    state: IState = {\n        editMode: false,\n        validUrl: ''\n    }\n\n    removeVacation = async () => {\n        if (!window.confirm('Are you sure you want to remove this vacation ?')) return;\n        const { id } = this.props;\n        \n        try {\n            await API_ACTIONS.removeVacation(id)\n            CONTEXT_ACTIONS.removeVacation(this.context, id)\n            socketMiddleware({\n                type: 'REMOVE_VACATION',\n                payload: id\n            })  \n        } catch (err: any) {\n            alert(err.response.data.error)\n            console.error(err.response.data.error)\n        }\n    }\n    handleFormSubmit = async (data: VacationModel, formMsgSetter: Function) => {\n        const { id, description, destination, imgUrl, fromDate, toDate, price, followersQuantity } = this.props;\n        const { description: newDescription, destination: newDestination, imgUrl: newImgUrl, fromDate: newFromDate, toDate: newToDate, price: newPrice } = data;\n\n        if (description === newDescription && destination === newDestination && imgUrl === newImgUrl && \n            moment(fromDate).isSame(newFromDate) && moment(toDate).isSame(newToDate) && price === newPrice ) return formMsgSetter('Change some values to update vacation ...');\n\n        if (moment(newFromDate).isSameOrBefore(moment())) return formMsgSetter('Start Date must be after today !');\n        if (moment(moment(newToDate)).isSameOrBefore(moment(newFromDate))) return formMsgSetter('End Date must be after Start Date !');\n        const vacation = {\n            id: id,\n            description: newDescription,\n            destination: newDestination,\n            imgUrl: newImgUrl,\n            fromDate: newFromDate,\n            toDate: newToDate,\n            price: newPrice,\n            followersQuantity: followersQuantity\n        }\n    \n        formMsgSetter('Applies changes ...')\n        try {\n            await API_ACTIONS.updateVacation(vacation);\n            CONTEXT_ACTIONS.updateVacation(this.context, vacation);\n            socketMiddleware({\n                type: 'UPDATE_VACATION',\n                payload: vacation\n            })     \n        } catch (err: any) {\n            alert(err.response.data.error)\n            console.error(err.response.data.error)\n        }\n\n        this.setState({\n            editMode: false\n        })\n    }\n\n    handleFollow = async (following: boolean) => {\n        const { id } = this.props;\n        try {\n            if (following) {\n                await API_ACTIONS.vacationFollowing(id, 'unfollow');\n                CONTEXT_ACTIONS.unFollowVacation(this.context, id, true);\n                socketMiddleware({\n                    type: 'UNFOLLOW_VACATION',\n                    payload: id\n                })\n            } else {\n                await API_ACTIONS.vacationFollowing(id, 'follow');\n                CONTEXT_ACTIONS.followVacation(this.context, id, true);\n                socketMiddleware({\n                    type: 'FOLLOW_VACATION',\n                    payload: id\n                })\n            }\n        } catch (error: any) {\n            alert(error.response.data.error)\n            console.error(error.response.data.error);\n        }\n    }\n\n    componentDidMount = async () => {\n        const { imgUrl } = this.props;\n        const isUrlValid = await checkUrl(imgUrl);\n        this.setState({\n            validUrl: isUrlValid ? imgUrl : no_img\n        })\n    }\n\n    render () {\n        const { id, description, destination, imgUrl, fromDate, toDate, price, followersQuantity, controlledComponent } = this.props;\n        const { appState } = this.context;\n        const { editMode, validUrl } = this.state;\n        const currentVacation = { id, description, destination, imgUrl, fromDate, toDate, price, followersQuantity };\n        const following: boolean = appState.vacations.follows.some((f: number) => f === id);\n        const token: string = getSavedJwt()\n        const { isAdmin }: Partial<UserModel> = getDecodedJwt(token)\n        \n        return (<div className={`${styles.container} position-relative m-2`} style={{width: '380px'}}> {\n            editMode ? \n                <VacationForm onSubmit={this.handleFormSubmit} abortForm={() => this.setState({ editMode: false })} data={currentVacation} title={'Edit Vacation'}/>\n            : (\n                <Card className={'position-absulte'}>\n                    <div className={'position-relative'}>\n                        <div className={'d-flex align-items-center position-absolute top-0 bg-dark text-light p-1 rounded fw-bold'}>\n                            <span className={`${styles.likeBtn} ${following ? styles.like : styles.unlike} ${isAdmin && styles.likeOff} pointer`} onClick={() => !isAdmin ? this.handleFollow(following) : null }><AiFillLike size={22}/> </span>\n                            <span className={'ms-1'}>{followersQuantity}</span>\n                        </div>\n                        <div className={'position-absolute top-0 end-0 bg-dark text-light p-1 rounded fw-bold'}>\n                            {price} $\n                        </div>\n                        <Card.Img src={validUrl} alt={destination} width={'auto'} height={'220px'} className={'rounded-0 rounded-top'}/>\n                    </div>\n                    <Card.Body className={'bg-dark text-light rounded-bottom'}>\n                        <Card.Title>{destination}</Card.Title>\n                        <Card.Text>{description}</Card.Text>\n                        <Card.Body className={'text-center'}>\n                            <Card.Text><FaPlaneDeparture /> <br/>{moment(fromDate).format('MMMM DD, YYYY HH:mm')}</Card.Text>\n                            <Card.Text><FaPlaneArrival /> <br/>{moment(toDate).format('MMMM DD, YYYY HH:mm')}</Card.Text>\n                        </Card.Body>\n                        { controlledComponent && <div className={'d-flex'}>\n                            <span className={'pointer'} title={'Edit this Vacation'} onClick={() => this.setState({ editMode: true })}><FiEdit size={22}/></span>\n                            <span className={'pointer px-2'} title={'Remove this Vacation'} onClick={this.removeVacation}><MdDeleteOutline size={22}/></span> \n                        </div>}\n                    </Card.Body>\n                </Card>\n        )} </div>\n        )\n    }\n}","import React from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { StateContext } from '../../context/app.state';\nimport { VacationModel } from '../../models/vacations.model';\nimport { getDecodedJwt, getSavedJwt, removeSavedJwt } from '../../utils/helpers';\nimport Header from '../../components/header'\nimport { VacationCard } from '../../components/vacation-card';\nimport { API_ACTIONS } from '../../api/api.actions';\nimport { UserModel } from '../../models/user.model';\nimport { VacationForm } from '../../components/vacation-form';\nimport moment from 'moment';\nimport { CONTEXT_ACTIONS } from '../../context/actions';\nimport { socketMiddleware } from '../../api/io.actions';\n\ninterface IState {\n    modalVisibility: boolean;\n}\nclass AdminPage extends React.Component<{} & RouteComponentProps, IState> {\n    static contextType = StateContext;\n\n    state: IState = {\n        modalVisibility: false\n    }\n    navigateToLogin = () => {\n        const { history } = this.props;\n\n        removeSavedJwt()\n        history.push('/login')\n    }\n    handleFormSubmit = async (data: VacationModel, formMsgSetter: Function) => {\n        const { description, destination, imgUrl, fromDate, toDate, price } = data;\n\n        if (moment(fromDate).isSameOrBefore(moment())) return formMsgSetter('Start Date must be after today !');\n        if (moment(moment(toDate)).isSameOrBefore(moment(fromDate))) return formMsgSetter('End Date must be after Start Date !');\n\n        const newVacation = {\n            description: description,\n            destination: destination,\n            imgUrl: imgUrl,\n            fromDate: fromDate,\n            toDate: toDate,\n            price: price,\n            followersQuantity: 0\n        }\n        try {\n            const { data } = await API_ACTIONS.addVacation(newVacation);\n            const newVacationWithId = { ...newVacation, id: data._id}\n            \n            CONTEXT_ACTIONS.addVacation(this.context, newVacationWithId);\n            socketMiddleware({\n                type: 'ADD_VACATION',\n                payload: newVacationWithId\n            })  \n        } catch (err: any) {\n            alert(err.response.data.error)\n        } finally {\n            this.setState({\n                modalVisibility: false\n            })\n        }\n    }\n    hideModal = () => {\n        this.setState({ modalVisibility: false })\n    }\n    componentDidMount = async () => {\n        const { history } = this.props;\n\n        const token = getSavedJwt();\n        const user: Partial<UserModel> = getDecodedJwt(token)\n        if (!user.isAdmin) history.push('/')\n\n        CONTEXT_ACTIONS.initialVacations(this.context, this.navigateToLogin)\n    }\n\n    render () {\n        const { appState } = this.context;\n        const { history } = this.props;\n        const { modalVisibility } = this.state;\n        return (\n            <div>\n                <Modal show={modalVisibility} onHide={this.hideModal} centered>\n                    <VacationForm onSubmit={this.handleFormSubmit} abortForm={this.hideModal} title={'Add Vacation'}/>\n                </Modal>\n                <Header title={'Admin Panel'} navigateBtnElem={<Button className={'mx-2'} onClick={() => history.push('/')} size={'sm'} variant={'success'}>Back to Home</Button>} />\n                <div className={'d-flex justify-content-center p-2'}>\n                    <Button onClick={() => this.setState({ modalVisibility: true })}>Add Vacation</Button>\n                    <Button className={'mx-2'} variant={'warning'} onClick={() => history.push('admin-reports')}>Reports Page</Button>\n                </div>\n                <div className={'d-flex flex-wrap align-items-start'}>{\n                    appState.vacations.sortedVacations.map((vacation: VacationModel) => <VacationCard key={vacation.id} controlledComponent={true} {...vacation}/>)\n                }</div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(AdminPage);","import React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { StateContext } from '../../context/app.state';\nimport Header from '../../components/header'\nimport { VacationCard } from '../../components/vacation-card';\nimport { VacationModel } from '../../models/vacations.model';\nimport { removeSavedJwt } from '../../utils/helpers';\nimport { Button } from 'react-bootstrap';\nimport { CONTEXT_ACTIONS } from '../../context/actions';\n\nclass HomePage extends React.Component<{} & RouteComponentProps> {\n    static contextType = StateContext;\n\n    navigateToLogin = () => {\n        const { history } = this.props;\n\n        removeSavedJwt()\n        history.push('/login')\n    }\n\n    componentDidMount = async () => {\n        CONTEXT_ACTIONS.initialVacations(this.context, this.navigateToLogin)\n    }\n    \n    render () {\n        const { appState } = this.context;\n        const { history } = this.props;\n        return (\n            <div>\n                <Header title={'Home'} navigateBtnElem={<Button className={'mx-2'} onClick={() => history.push('/admin')} size={'sm'} variant={'success'}>Admin Panel</Button>}/>\n                <div className={'d-flex flex-wrap'}>{\n                    appState.vacations.sortedVacations.map((vacation: VacationModel) => <VacationCard key={vacation.id} controlledComponent={false} {...vacation}/>)\n                }</div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(HomePage);\n","import axios from 'axios';\nimport React, { FormEvent } from 'react';\nimport { Form, FormControl, InputGroup, Button } from 'react-bootstrap';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { setNewJwt } from '../../utils/helpers';\n\ninterface IState {\n    errMsg: string\n}\nclass LoginPage extends React.Component<{} & RouteComponentProps, IState> {\n    \n    state: IState = {\n        errMsg: ''\n    }\n\n    onSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        const { history } = this.props;\n        const elem = e.target as HTMLFormElement;\n\n        try {\n            const results = await axios.get<{ jwt: string}>('http://localhost:4000/api/auth/login', {\n                params: {\n                    userName: elem.userName.value,\n                    password: elem.password.value\n                }\n            })\n            const { jwt } = results.data;\n            setNewJwt(jwt)\n            history.push('/')\n        } catch (err: any) {\n            this.setState({\n                ...this.state,\n                errMsg: err.response.data.error\n            })\n        }\n    }\n    render () {\n        const { errMsg } = this.state;\n        return (\n            <div>\n                <h1>Login page</h1>\n                <div>\n                    <Form onSubmit={this.onSubmit}>\n                        <InputGroup>\n                            <InputGroup.Text>User Name</InputGroup.Text>\n                            <FormControl type={'text'} name={'userName'} required/>\n                        </InputGroup>\n                        <InputGroup>\n                            <InputGroup.Text>Password</InputGroup.Text>\n                            <FormControl type={'password'} name={'password'} required/>\n                        </InputGroup>\n                        <p>Not a user ? <Link to={'/signup'}>Sign up !</Link></p>\n                        <Button type={'submit'}>login</Button>\n                        <p>{ errMsg }</p>\n                    </Form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(LoginPage);","import React from 'react';\nimport { Redirect, Route } from \"react-router-dom\";\nimport { getSavedJwt } from '../utils/helpers';\n\nexport class PrivateRoute extends React.Component<{ path: string }> {\n    render () {\n        const { children, path } = this.props;\n        return (\n          <Route\n            path={path}\n            exact\n            render={() =>\n              getSavedJwt() ? (\n                children\n              ) : (\n                <Redirect to={'/login'} />\n              )\n            }\n          />\n        );\n    }\n  }","import React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { StateContext } from '../../context/app.state';\nimport Header from '../../components/header'\nimport { Button, Container } from 'react-bootstrap';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement } from 'chart.js';\nimport { VacationModel } from '../../models/vacations.model';\nimport { removeSavedJwt } from '../../utils/helpers';\nimport { CONTEXT_ACTIONS } from '../../context/actions';\n\nChartJS.register(CategoryScale, LinearScale,  BarElement);\n\ninterface IState {\n    chartData: any;\n}\nclass ReportsPage extends React.Component<{} & RouteComponentProps, IState> {\n    static contextType = StateContext;\n    state: IState = {\n        chartData: null\n    }\n\n    navigateToLogin = () => {\n        const { history } = this.props;\n\n        removeSavedJwt()\n        history.push('/login')\n    }\n\n    initialChartData = (sortedVacations: VacationModel[]) => {\n        const dataset: { labels: string[], datasets: any } = { \n            labels: [],\n            datasets: [{\n                label: '',\n                data: [],\n                backgroundColor: '#212529'\n            }]\n        };\n        sortedVacations.forEach((vacation: VacationModel) => {\n            if (vacation.followersQuantity < 1) return;\n            \n            dataset.labels.push(`Vacation ${vacation.id} - ${vacation.destination}`)\n            dataset.datasets[0].data.push(vacation.followersQuantity)\n        })\n        this.setState({\n            chartData: dataset\n        })\n    }\n    componentDidMount = async () => {\n        const data = await CONTEXT_ACTIONS.initialVacations(this.context, this.navigateToLogin);\n        if(!data) return;\n\n        this.initialChartData(data.sortedVacations);\n    }\n\n    render () {\n        const { history } = this.props;\n        const { chartData } = this.state;\n        const chartOptions = { \n            responsive: true,\n            scales: {\n                 y: { ticks: { stepSize: 1 } }\n                }\n            }\n        return (\n            <div>\n                <Header title={'Admin Reports Panel'} navigateBtnElem={<Button className={'mx-2'} onClick={() => history.push('/')} size={'sm'} variant={'success'}>Back to Home</Button>} />\n                <div className={'d-flex flex justify-content-center my-3'}> <Button onClick={() => history.push('admin')}>Admin Page</Button></div>\n                <Container className={'mb-3'}>\n                    { chartData && <Bar\n                        options={chartOptions}\n                        data={chartData}\n                    />}\n                </Container>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(ReportsPage);","import React from 'react';\nimport { Redirect, Route } from \"react-router-dom\";\nimport { UserModel } from '../models/user.model';\nimport { getDecodedJwt, getSavedJwt } from '../utils/helpers';\n\nexport class RestrictedRoute extends React.Component<{ path: string }> {\n    render () {\n        const { children, path } = this.props;\n        const token = getSavedJwt();\n        const user: Partial<UserModel> = getDecodedJwt(token)\n        return (\n          <Route\n            path={path}\n            exact\n            render={() =>\n              user.isAdmin ? (\n                children\n              ) : (\n                <Redirect to={'/'} />\n              )\n            }\n          />\n        );\n    }\n  }","import axios from 'axios';\nimport React, { FormEvent } from 'react';\nimport { Form, FormControl, InputGroup, Button } from 'react-bootstrap';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { setNewJwt } from '../../utils/helpers';\n\ninterface IState {\n    errMsg: string\n}\n\nclass SignupPage extends React.Component<{} & RouteComponentProps, IState> {\n\n    state: IState = {\n        errMsg: ''\n    }\n\n    onSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        const { history } = this.props;\n        const elem = e.target as HTMLFormElement;\n\n        try {\n            const results = await axios.post<{jwt: string}>('http://localhost:4000/api/auth/signup', {\n                firstName: elem.firstName.value,\n                lastName: elem.lastName.value,\n                userName: elem.userName.value,\n                password: elem.password.value\n            })\n            const { jwt } = results.data;\n            setNewJwt(jwt)\n            history.push('/')\n            \n        } catch (err: any) {\n            this.setState({\n                ...this.state,\n                errMsg: err.response.data.error\n            })\n        }\n    }\n    render () {\n        const { errMsg } = this.state;\n\n        return (\n            <div>\n                <h1>Signup Page</h1>\n                <div>\n                    <Form onSubmit={this.onSubmit}>\n                        <InputGroup>\n                            <InputGroup.Text>First Name</InputGroup.Text>\n                            <FormControl type={'text'} name={'firstName'}/>\n                        </InputGroup>\n                        <InputGroup>\n                            <InputGroup.Text>Last Name</InputGroup.Text>\n                            <FormControl type={'text'} name={'lastName'}/>\n                        </InputGroup>\n                        <InputGroup>\n                            <InputGroup.Text>User Name</InputGroup.Text>\n                            <FormControl type={'text'} name={'userName'}/>\n                        </InputGroup>\n                        <InputGroup>\n                            <InputGroup.Text>Password</InputGroup.Text>\n                            <FormControl type={'password'} name={'password'}/>\n                        </InputGroup>\n                        <p>I have a user, <Link to={'/login'}>Login !</Link></p>\n                        <Button type={'reset'} variant={'secondary'}>Reset</Button>\n                        <Button type={'submit'} variant={'success'}>Signup</Button>\n                        <p>{ errMsg }</p>\n                    </Form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(SignupPage);","import React from \"react\";\nimport { Redirect, Route, Switch } from \"react-router\";\nimport AdminPage from \"./admin-page\";\nimport HomePage from \"./home-page\";\nimport LoginPage from \"./login-page\";\nimport { PrivateRoute } from \"./privateRoute\";\nimport ReportsPage from \"./reports-page\";\nimport { RestrictedRoute } from \"./restrictedRoute\";\nimport SignupPage from \"./signup-page\";\n\nexport class AppRouter extends React.Component {\n\n  render () {\n\n    return (\n      <Switch>\n          <Route exact path={'/login'} component={LoginPage} />\n          <Route exact path={'/signup'} component={SignupPage} />\n          <RestrictedRoute path={'/admin'}> <AdminPage /> </RestrictedRoute>\n          <RestrictedRoute path={'/admin-reports'}> <ReportsPage /> </RestrictedRoute>\n          <PrivateRoute path={'/'}> <HomePage /> </PrivateRoute>\n          <Route path=\"*\">\n            <Redirect to=\"/\" />\n          </Route>\n      </Switch>\n    )\n  }\n}","import React from 'react';\nimport { socketMiddleware } from '../../api/io.actions';\nimport { CONTEXT_ACTIONS } from '../../context/actions';\nimport { StateContext } from '../../context/app.state';\n\n// I hope that is a good idea (or at least not a bad one) to make a provider with the socket listeners..\n// I preffered to avoid from set socket functionality in App component.\n// i decided to put the socket listeners in a react component, because that i need the global context to transport into CONTEXT_ATIONS when a new action occurred.\nexport class SocketProvider extends React.Component {\n    static contextType = StateContext;\n  \n    componentDidMount = () => {\n      const socket = socketMiddleware({\n        type: 'GET_CONNECTION'\n      })\n      socket?.on('unfollow_vacation', (id) => {\n          CONTEXT_ACTIONS.unFollowVacation(this.context, id, false);\n      })\n      socket?.on('follow_vacation', (id) => {\n          CONTEXT_ACTIONS.followVacation(this.context, id, false);\n      })\n      socket?.on('update_vacation', (updatedVacation) => {\n          CONTEXT_ACTIONS.updateVacation(this.context, updatedVacation);\n      })\n      socket?.on('add_vacation', (newVacation) => {\n          CONTEXT_ACTIONS.addVacation(this.context, newVacation);\n      })\n      socket?.on('remove_vacation', (id) => {\n          CONTEXT_ACTIONS.removeVacation(this.context, id);\n      })\n    }\n  \n    render() {\n      const { children } = this.props;\n      return children;\n    }\n  }","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { AppState, StateContext } from \"./context/app.state\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\nimport { AppRouter } from \"./routes/appRouter\";\nimport { SocketProvider } from \"./components/socket-provider\";\n\nexport default class App extends React.Component<{}, AppState> {\n  state: AppState = {\n    vacations: {\n      sortedVacations: [],\n      follows: []\n    }\n  };\n\n  setAppState = (newAppState: Partial<AppState>) => {\n    this.setState(newAppState as any);\n  };\n\n  render() {\n    return (\n      <BrowserRouter>\n        <StateContext.Provider value={{ appState: this.state, setAppState: this.setAppState }}>\n          <SocketProvider>\n            <AppRouter />\n          </SocketProvider>\n        </StateContext.Provider>\n      </BrowserRouter>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1ewrV\",\"likeBtn\":\"styles_likeBtn__1ZkQZ\",\"like\":\"styles_like__1Nqz4\",\"likeOff\":\"styles_likeOff__1wCuf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formMsgContainer\":\"styles_formMsgContainer__2mdxB\"};"],"sourceRoot":""}